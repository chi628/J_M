(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-548eccb9"],{"8b62":function(t,a,o){"use strict";var s=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{},[o("ul",{staticClass:"df jc-sa"},[o("li",{staticClass:"steps df fxd-c jc-c ai-c",class:{tag:t.one}},[o("div",{staticClass:"step df jc-c ai-c"},[o("svg",{attrs:{height:"42",width:"42"}},[o("circle",{attrs:{cx:"21",cy:"21",r:"20"}})]),o("span",[t._v("1")])]),o("p",[t._v("訂單確認")])]),o("li",{staticClass:"steps df fxd-c jc-c ai-c",class:{tag:t.two}},[o("div",{staticClass:"step df jc-c ai-c"},[o("svg",{attrs:{height:"42",width:"42"}},[o("circle",{attrs:{cx:"21",cy:"21",r:"20"}})]),o("span",[t._v("2")])]),o("p",[t._v("收件資訊")])]),o("li",{staticClass:"steps df fxd-c jc-c ai-c",class:{tag:t.three}},[o("div",{staticClass:"step df jc-c ai-c"},[o("svg",{attrs:{height:"42",width:"42"}},[o("circle",{attrs:{cx:"21",cy:"21",r:"20"}})]),o("span",[t._v("3")])]),o("p",[t._v("訂單成立")])])])])},i=[],e={props:["step"],data:function(){return{one:!1,two:!1,three:!1}},created:function(){"one"===this.step?(this.one=!0,this.two=!1,this.three=!1):"two"===this.step?(this.one=!1,this.two=!0,this.three=!1):"three"===this.step&&(this.one=!1,this.two=!1,this.three=!0)}},c=e,n=o("2877"),r=Object(n["a"])(c,s,i,!1,null,null,null);a["a"]=r.exports},b019:function(t,a,o){"use strict";o.r(a);var s=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"checkout container df fxd-c"},[o("OrderStep",{attrs:{step:t.step}}),o("loading",{attrs:{loader:"dots",active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),o("div",{staticClass:"orders"},[o("table",[t._m(0),o("tbody",t._l(t.cart,(function(a){return o("tr",{key:a.id},[o("td",{staticClass:"checkout_item df jc-c ai-c"},[o("div",{staticClass:"itemimg"},[o("router-link",{attrs:{to:"/product/"+a.product.id}},[o("img",{attrs:{src:a.product.imageUrl[0],alt:""}})])],1),o("p",{staticClass:"itemtitle"},[o("router-link",{attrs:{to:"/product/"+a.product.id}},[t._v(" "+t._s(a.product.title)+" ")])],1)]),o("td",[o("span",[t._v("數量")]),o("div",[o("select",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],on:{change:[function(o){var s=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"quantity",o.target.multiple?s:s[0])},function(o){return t.updateCart(a.product.id,a.quantity)}]}},[o("option",{attrs:{value:"1"}},[t._v("1")]),o("option",{attrs:{value:"2"}},[t._v("2")]),o("option",{attrs:{value:"3"}},[t._v("3")]),o("option",{attrs:{value:"4"}},[t._v("4")]),o("option",{attrs:{value:"5"}},[t._v("5")]),o("option",{attrs:{value:"6"}},[t._v("6")]),o("option",{attrs:{value:"7"}},[t._v("7")]),o("option",{attrs:{value:"8"}},[t._v("8")]),o("option",{attrs:{value:"9"}},[t._v("9")]),o("option",{attrs:{value:"10"}},[t._v("10")]),t._m(1,!0)])])]),o("td",[o("span",[t._v("單價")]),o("p",[t._v("NT."+t._s(t._f("money")(a.product.price)))])]),o("td",[o("span",[t._v("小計")]),o("p",[t._v("NT."+t._s(t._f("money")(a.product.price*a.quantity)))])]),o("td",[o("span",[t._v("刪除")]),o("button",{attrs:{type:"button"},on:{click:function(o){return t.removeCartItem(a.product.id)}}},[o("i",{staticClass:"far fa-trash-alt"})])])])})),0)]),o("div",{staticClass:"discount df jc-fe ai-c"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],attrs:{type:"text",name:"coupon",placeholder:"Enter discount code"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),o("button",{attrs:{type:"submit"},on:{click:t.addCoupon}},[t._v("Apply")])]),o("div",{staticClass:"order_total df jc-fe ai-c"},[o("ul",[o("li",[o("span",[t._v("Subtotal")]),o("span",[t._v(t._s(t._f("money")(t.subtotal)))])]),o("li",[o("span",[t._v("Shipping")]),o("span",[t._v(t._s(t._f("money")(t.shipping)))])]),o("li",[o("span",[t._v("Discount")]),t.discount>0?o("span",[t._v("-"+t._s(t._f("money")(t.discount)))]):o("span",[t._v(t._s(t._f("money")(t.discount)))])]),o("li",[o("span",[t._v("Total")]),o("span",[t._v(t._s(t._f("money")(t.subtotal+t.shipping-t.discount)))])])])]),o("div",{staticClass:"checkout_btns df jc-sb ai-c"},[o("button",{staticClass:"back_btn",attrs:{type:"button"}},[o("router-link",{attrs:{to:"/"}},[t._v("« Back to Shopping")])],1),o("button",{staticClass:"info_btn",attrs:{type:"button"}},[o("router-link",{attrs:{to:"/orderinfo"}},[t._v("Order »")])],1)])])],1)},i=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("thead",[o("tr",[o("th",[t._v("商品資訊")]),o("th",[t._v("數量")]),o("th",[t._v("單價")]),o("th",[t._v("小計")]),o("th",[t._v("刪除")])])])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("option",{attrs:{value:""}},[o("input",{attrs:{type:"number"}})])}],e=(o("99af"),o("4160"),o("159b"),o("8b62")),c={components:{OrderStep:e["a"]},data:function(){return{isLoading:!1,cart:[],subtotal:0,shipping:60,discount:0,coupon:{},coupon_code:"",step:"one"}},methods:{getCart:function(){var t=this;this.isLoading=!0,this.axios.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/ec/shopping")).then((function(a){t.isLoading=!1,t.cart=a.data.data,t.subtotal=0,t.cart.forEach((function(a){t.subtotal+=a.product.price*a.quantity}))})).catch((function(){t.isLoading=!1}))},updateCart:function(t,a){var o=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/ec/shopping"),i={product:t,quantity:a};this.axios.patch(s,i).then((function(){o.getCart(),o.isLoading=!1})).catch((function(){o.isLoading=!1}))},removeCartItem:function(t){var a=this;this.isLoading=!0;var o="".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/ec/shopping/").concat(t);this.axios.delete(o).then((function(){a.isLoading=!1,a.getCart()})).catch((function(){a.isLoading=!1}))},addCoupon:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/ec/coupon/search"),o={code:this.coupon_code};this.axios.post(a,o).then((function(a){t.coupon=a.data.data,t.discount=Math.floor(t.subtotal*t.coupon.percent/100),t.$bus.$emit("checkcoupon",t.coupon),t.isLoading=!1})).catch((function(){t.isLoading=!1}))}},created:function(){this.getCart()}},n=c,r=o("2877"),u=Object(r["a"])(n,s,i,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=chunk-548eccb9.5c3c93a3.js.map