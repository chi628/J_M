(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf132"],{"61bc":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backend"},[a("loading",{attrs:{loader:"dots",active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("Modal",{attrs:{title:t.title,isNew:t.isNew,openmodal:t.showModal,tempItem:t.tempProduct},on:{additem:t.addProduct,updateitem:t.updateProduct,closemodal:t.closeModal}}),a("DelModal",{attrs:{title:t.title,tempItem:t.tempProduct,opendelmodal:t.showDelModal},on:{deleteitem:t.deleteProduct,closedelmodal:t.closeDelModal}}),a("div",{staticClass:"container"},[a("div",{staticClass:"df jc-sb ai-c"},[a("h3",[t._v("Products")]),a("button",{staticClass:"addbtn",attrs:{type:"button"},on:{click:function(e){return t.openModal("new")}}},[t._v("新增產品")])]),a("table",[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",[a("img",{attrs:{src:e.imageUrl[0],alt:""}})]),a("td",[t._v(t._s(e.price))]),a("td",[a("label",{staticClass:"container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.enabled,expression:"item.enabled"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.enabled)?t._i(e.enabled,null)>-1:e.enabled},on:{change:function(a){var o=e.enabled,i=a.target,s=!!i.checked;if(Array.isArray(o)){var c=null,n=t._i(o,c);i.checked?n<0&&t.$set(e,"enabled",o.concat([c])):n>-1&&t.$set(e,"enabled",o.slice(0,n).concat(o.slice(n+1)))}else t.$set(e,"enabled",s)}}}),a("p",[t._v("上架")])])]),a("td",[a("button",{staticClass:"editbtn",attrs:{type:"button"},on:{click:function(a){return t.openModal("edit",e)}}},[t._v(" Edit ")]),a("button",{staticClass:"delbtn",attrs:{type:"button"},on:{click:function(a){return t.openModal("delete",e)}}},[t._v(" Delete ")])])])})),0)]),a("Pagination",{staticClass:"df jc-c",attrs:{page:t.pagination},on:{updatepage:t.getProducts}})],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Category")]),a("th",[t._v("Brand")]),a("th",[t._v("Image")]),a("th",[t._v("Price")]),a("th",[t._v("Enabled")]),a("th",[t._v("Edit / Delete")])])])}],s=(a("99af"),a("5530")),c=a("62cd"),n=a("b3e1"),d=a("ebbb"),r={components:{Pagination:c["a"],Modal:n["a"],DelModal:d["a"]},data:function(){return{isLoading:!1,products:[],tempProduct:{imageUrl:[]},isNew:!1,showModal:!1,showDelModal:!1,pagination:{},err_data:"",title:"產品"}},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,this.axios.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/admin/ec/products?page=").concat(e)).then((function(e){t.isLoading=!1,t.products=e.data.data,t.pagination=e.data.meta.pagination})).catch((function(e){t.isLoading=!1,t.err_data=e.response.data.message,t.$bus.$emit("error",t.err_data)}))},getProduct:function(t){var e=this;this.isLoading=!0,this.axios.get("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/admin/ec/product/").concat(t)).then((function(t){e.isLoading=!1,e.tempProduct=t.data.data})).catch((function(t){e.isLoading=!1,e.err_data=t.response.data.message,e.$bus.$emit("error",e.err_data)}))},addProduct:function(){var t=this;this.isLoading=!0,this.axios.post("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/admin/ec/product"),this.tempProduct).then((function(){t.isLoading=!1,t.getProducts(),t.closeModal()})).catch((function(e){t.isLoading=!1,t.err_data=e.response.data.message,t.isLoading=!1}))},updateProduct:function(t){var e=this;this.isLoading=!0,this.axios.patch("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/admin/ec/product/").concat(t),this.tempProduct).then((function(){e.isLoading=!1,e.getProducts(),e.closeModal()})).catch((function(t){e.isLoading=!1,e.err_data=t.response.data.message,e.isLoading=!1})),this.tempProduct={imageUrl:[]}},deleteProduct:function(){var t=this;this.isLoading=!0,this.axios.delete("".concat("https://course-ec-api.hexschool.io","/api/").concat("8e167757-8b00-4955-b28e-9494996b792d","/admin/ec/product/").concat(this.tempProduct.id)).then((function(){t.isLoading=!1,t.showDelModal=!1,t.getProducts()})).catch((function(e){t.err_data=e.response.data.message,t.isLoading=!1,t.isLoading=!1})),this.tempProduct={imageUrl:[]}},openModal:function(t,e){switch(t){case"new":this.isNew=!0,this.showModal=!0,this.tempProduct={imageUrl:[]};break;case"edit":this.isNew=!1,this.tempProduct=JSON.parse(JSON.stringify(e)),this.getProduct(this.tempProduct.id),this.showModal=!0;break;case"delete":this.tempProduct=Object(s["a"])({},e),this.showDelModal=!0;break;default:break}},closeModal:function(){this.showModal=!1},closeDelModal:function(){this.showDelModal=!1}},created:function(){this.getProducts()}},l=r,u=a("2877"),h=Object(u["a"])(l,o,i,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0cf132.70146ad2.js.map